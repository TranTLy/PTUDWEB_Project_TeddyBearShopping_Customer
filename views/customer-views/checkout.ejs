<!-- TRANG GIỎ HÀNG -->
<%include ../components/header%>
<link rel="stylesheet" type="text/css" href="stylesheets/checkout.css" />

<!-- short -->
<div class="using-border py-3">
  <div class="inner_breadcrumb  ml-4">
    <ul class="short_ls">
      <li>
        <a href="index">Trang chủ</a>
        <span>/ /</span>
      </li>
      <li><a href="checkout">Giỏ hàng</a></li>
    </ul>
  </div>
</div>
<%if  (!cartShop || cartShop.length===0) {%>
<section class="checkout py-lg-4 py-md-3 py-sm-3 py-3">
  <div class="container py-lg-5 py-md-4 py-sm-4 py-3">
    <div class="shop_inner_inf">
      <div class="privacy about">
        <h3>Giỏ hàng</h3>
        <div class="checkout-right">
          <h4><i>Giỏ hàng của bạn trống</i></span></h4>
      </div>
      </div>
    </div>
  </div>
</section>
<%} else {%>

<!-- //short-->
<!--Checkout-->
<!-- //banner -->
<!-- top Products -->
<section class="checkout py-lg-4 py-md-3 py-sm-3 py-3">
  <div class="container py-lg-5 py-md-4 py-sm-4 py-3">
    <div class="shop_inner_inf">
      <div class="privacy about">
        <h3>Giỏ hàng</h3>
        <div class="checkout-right">
          <h4>Giỏ hàng của bạn gồm: <span><%=cartShop.length%> sản phẩm</span></h4>
          <table class="timetable_sub">
            <thead>
              <tr>
                <th>STT</th>
                <th>Hình ảnh</th>
                <th>Số lượng</th>
                <th>Tên hàng</th>
                <th>Giá</th>
                <th>Thành tiền</th>                
                <th>Xóa</th>
              </tr>
            </thead>
            <tbody>
              <%cartShop.map((item, index)=>{%>
                <tr class="rem1 product-item-session" id="product-<%=item._id%>">
                    <td class="invert"><%=index%></td>
                    <td class="invert-image" id="img-product-checkout">
                      <a href="/single/<%=item._id%>"
                        ><img src="<%=item.imgs%>" alt=" " class="img-responsive"
                      /></a>
                    </td>
                    <td class="invert">
                      <div class="quantity">
                        <div class="quantity-select">
                          <div class="entry value-minus" onclick= "changeQuantity('<%=item._id%>', <%=index%>, -1)">&nbsp;</div>
                          <div class="entry value quantityProduct" id= ""><%=item.quantity%></div>
                          <div class="entry value-plus" onclick= "changeQuantity('<%=item._id%>', <%=index%>, +1)">&nbsp;</div>
                        </div>
                      </div>
                    </td>
                    <td class="invert"><%=item.name%></td>
                    <td class="invert"><%=(item.price/1000.0).toFixed(3)%></td>
                    <td class="invert"><%=(item.price * item.quantity/1000.0).toFixed(3)%></td>
                    <td class="invert">
                      <div class="rem" onclick= "onDeleteProduct('<%=item._id%>')">
                        <div class="" id= "btn-cancel-product" >Hủy</div>
                      </div>
                    </td>
                  </tr>
              <%})%>
            </tbody>
          </table>
        </div>
        <div class="checkout-left">
          <div class="col-md-4 checkout-left-basket">
            <h4>Hóa đơn</h4>
            <ul>
            <%
            var sum = 0;
            cartShop.map((item, index)=>{ 
              const money = (item.price*item.quantity);
              sum +=money;
              %>
              <li><%=item.name%> <i>-</i> <span><%=(money/1000.0).toFixed(3)%> </span><li>
           <% })%> 
              <li><b> Tổng cộng <i>-</i> <span><%=(sum/1000.0).toFixed(3)%></span> </b></li>
            </ul>
          </div>
          <div class="col-md-8 address_form">
            <h4>Thông tin giao hàng chi tiết</h4>
            <form
              action="payment"
              method="post"
              class="creditly-card-form agileinfo_form"
            >
              <section class="creditly-wrapper wrapper">
                <div class="information-wrapper">
                  <div class="first-row form-group">
                    <div class="controls">
                      <label class="control-label">Họ và tên: </label>
                      <input
                        class="billing-address-name form-control"
                        type="text"
                        name="name"
                        placeholder="Full name"
                      />
                    </div>
                    <div class="card_number_grids">
                      <div class="card_number_grid_left">
                        <div class="controls">
                          <label class="control-label">Điện thoại:</label>
                          <input
                            class="form-control"
                            type="text"
                            placeholder="Mobile number"
                          />
                        </div>
                      </div>
                      <div class="card_number_grid_right">
                        <div class="controls">
                          <label class="control-label"
                            >Số nhà, đường, phường/ khu phố:
                          </label>
                          <input
                            class="form-control"
                            type="text"
                            placeholder="Landmark"
                          />
                        </div>
                      </div>
                      <div class="clear"></div>
                    </div>
                    <div class="controls">
                      <label class="control-label">Thị trấn/ thành phố</label>
                      <input
                        class="form-control"
                        type="text"
                        placeholder="Town/City"
                      />
                    </div>
                    <div class="controls">
                      <label class="control-label">Loại địa chỉ: </label>
                      <select class="form-control option-w3ls">
                        <option>Cơ quan</option>
                        <option>Nhà riêng</option>
                        <option>Thương mại</option>
                      </select>
                    </div>
                  </div>
                  <button class="submit check_out">
                    Giao hàng đến địa chỉ này
                  </button>
                </div>
              </section>
              <!-- <div class="checkout-right-basket">
                  <a href="payment">Thanh toán</a>
                </div> -->
                <button type="submit" class="btn subscrib-btnn">Thanh toán</button>
            </form>
            
          </div>
          <div class="clearfix"></div>
          <div class="clearfix"></div>
        </div>
      </div>
    </div>
    <!-- //top products -->
  </div>
</section>
<%}%>
<% include ../components/footer%>
<script src = "javascripts/checkout.js"></script>
